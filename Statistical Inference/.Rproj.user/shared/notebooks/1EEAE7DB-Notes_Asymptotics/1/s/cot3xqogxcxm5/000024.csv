"0","n = 100"
"0","pvals = seq(0.1, 0.9, by = 0.01)"
"0","num_sim = 1000"
"0","#p = seq(0, 1, by = 0.001)"
"0","coverage = sapply(pvals, function(p) {"
"0","  phats = rbinom(num_sim, prob = p, size = n) / n"
"0","  ll = phats - qnorm(0.975) * sqrt(phats * (1 - phats) / n)"
"0","  ul = phats + qnorm(0.975) * sqrt(phats * (1 - phats) / n)"
"0","  mean(ll < p & ul > p)"
"0","})"
"0","plot(pvals, coverage,  type = 'l')"
